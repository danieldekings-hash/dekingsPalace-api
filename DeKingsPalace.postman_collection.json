{
	"info": {
		"_postman_id": "dekingspalace-api-collection",
		"name": "DeKingsPalace API",
		"description": "Investment Platform API - Authentication, Investments, Earnings, Referrals, and Webhooks",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201 || pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('user_email', pm.request.body.raw ? JSON.parse(pm.request.body.raw).email : '');",
									"    pm.environment.set('referral_code', response.referralCode || '');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fullName\": \"John Doe\",\n  \"email\": \"john.doe@example.com\",\n  \"phoneNumber\": \"+1234567890\",\n  \"password\": \"SecurePassword123!\",\n  \"confirmPassword\": \"SecurePassword123!\",\n  \"referralCode\": \"\",\n  \"role\": \"investor\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "Register a new user. An OTP will be sent to the email address. You must verify the email before logging in. Role can be 'investor' or 'admin' (defaults to 'investor')."
					},
					"response": []
				},
				{
					"name": "Verify Email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.token) {",
									"        pm.environment.set('auth_token', response.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{user_email}}\",\n  \"otp\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/verify-email",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"verify-email"
							]
						},
						"description": "Verify user email with OTP code received via email. Returns JWT token upon successful verification. OTP expires in 5 minutes."
					},
					"response": []
				},
				{
					"name": "Resend OTP",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{user_email}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/resend-otp",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"resend-otp"
							]
						},
						"description": "Resend OTP verification code to user's email. Use this if the OTP expired or wasn't received."
					},
					"response": []
				},
				{
					"name": "Login User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('auth_token', response.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"SecurePassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login with email and password. Returns JWT token. Email must be verified before login (use Verify Email endpoint after registration)."
					},
					"response": []
				},
				{
					"name": "Register Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201 || pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('admin_email', pm.request.body.raw ? JSON.parse(pm.request.body.raw).email : '');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fullName\": \"Admin User\",\n  \"email\": \"admin@dekingspalace.com\",\n  \"phoneNumber\": \"+1987654321\",\n  \"password\": \"AdminPassword123!\",\n  \"confirmPassword\": \"AdminPassword123!\",\n  \"referralCode\": \"\",\n  \"role\": \"admin\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "Register an admin user for testing. An OTP will be sent to the email. Verify email before login."
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"refresh"
							]
						}
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "Forgot Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{user_email}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/forgot-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"forgot-password"
							]
						}
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{password_reset_token}}\",\n  \"newPassword\": \"NewPassword123!\",\n  \"confirmPassword\": \"NewPassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/reset-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"reset-password"
							]
						}
					},
					"response": []
				}
			],
			"description": "User authentication endpoints - register, verify email, resend OTP, and login"
		},
		{
			"name": "Investments",
			"item": [
				{
					"name": "Create Investment - Gold Plan",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.data) {",
									"        pm.environment.set('investment_id', response.data.investmentId);",
									"        pm.environment.set('payment_reference', response.data.reference);",
									"        pm.environment.set('wallet_balance', response.data.walletBalance || 0);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"plan\": \"gold\",\n  \"amount\": 200,\n  \"currency\": \"USDT\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/investments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments"
							]
						},
						"description": "Create a new investment with Gold Plan ($101-$500, 10% monthly return). Amount is deducted from wallet balance. Plan options: bronze, silver, gold, platinum, diamond."
					},
					"response": []
				},
				{
					"name": "Create Investment - Platinum Plan",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"plan\": \"platinum\",\n  \"amount\": 5000,\n  \"currency\": \"USDT\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/investments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments"
							]
						},
						"description": "Create a new investment with Platinum Plan ($501-$5000, 15% monthly return). Amount is deducted from wallet balance."
					},
					"response": []
				},
				{
					"name": "Create Investment - Bronze Plan",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"plan\": \"bronze\",\n  \"amount\": 30,\n  \"currency\": \"USDT\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/investments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments"
							]
						},
						"description": "Create a new investment with Bronze Plan ($20-$50, 5% monthly return). Amount is deducted from wallet balance."
					},
					"response": []
				},
				{
					"name": "Create Investment - Silver Plan",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"plan\": \"silver\",\n  \"amount\": 75,\n  \"currency\": \"USDT\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/investments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments"
							]
						},
						"description": "Create a new investment with Silver Plan ($51-$100, 8% monthly return). Amount is deducted from wallet balance."
					},
					"response": []
				},
				{
					"name": "Create Investment - Diamond Plan",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"plan\": \"diamond\",\n  \"amount\": 10000,\n  \"currency\": \"USDT\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/investments",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments"
							]
						},
						"description": "Create a new investment with Diamond Plan ($5001+, 20% monthly return). Amount is deducted from wallet balance."
					},
					"response": []
				},
				{
					"name": "List Investments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/investments?status=all&sortBy=startDate&sortOrder=desc&page=1&pageSize=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments"
							],
							"query": [
								{ "key": "status", "value": "all" },
								{ "key": "sortBy", "value": "startDate" },
								{ "key": "sortOrder", "value": "desc" },
								{ "key": "page", "value": "1" },
								{ "key": "pageSize", "value": "20" }
							]
						},
						"description": "List investments for the authenticated user with pagination, status filter, and sorting."
					},
					"response": []
				},
				{
					"name": "Get Investment by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/investments/{{investment_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments",
								"{{investment_id}}"
							]
						},
						"description": "Get details of a specific investment by ID."
					},
					"response": []
				},
				{
					"name": "Patch Investment (pause/resume)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"action\": \"pause\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/investments/{{investment_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments",
								"{{investment_id}}"
							]
						},
						"description": "Pause or resume an investment. Body.action must be either \"pause\" or \"resume\"."
					},
					"response": []
				},
				{
					"name": "Investments Summary",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/investments/summary",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments",
								"summary"
							]
						},
						"description": "Get aggregate summary for the authenticated user's investments."
					},
					"response": []
				},
				{
					"name": "Export Investments (CSV/XLSX)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/investments/export?format=csv",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"investments",
								"export"
							],
							"query": [
								{ "key": "format", "value": "csv" }
							]
						},
						"description": "Export investments as CSV or XLSX. Optional query params: status, sortBy, sortOrder."
					},
					"response": []
				}
			],
			"description": "Investment management endpoints - Create investments from wallet balance. Investment plans: Bronze ($20-$50, 5%), Silver ($51-$100, 8%), Gold ($101-$500, 10%), Platinum ($501-$5000, 15%), Diamond ($5001+, 20%). Returns are calculated monthly."
		},
		{
			"name": "Plans",
			"item": [
				{
					"name": "List Active Plans",
					"request": {"method": "GET", "header": [], "url": {"raw": "{{base_url}}/api/plans", "host": ["{{base_url}}"], "path": ["api","plans"]}},
					"response": []
				},
				{
					"name": "Create Plan (Admin)",
					"request": {
						"method": "POST",
						"header": [
							{"key": "Content-Type", "value": "application/json"},
							{"key": "Authorization", "value": "Bearer {{admin_token}}"}
						],
						"body": {"mode": "raw", "raw": "{\n  \"name\": \"Gold\",\n  \"tier\": \"Gold\",\n  \"minAmount\": 100,\n  \"maxAmount\": 10000,\n  \"percentage\": 2,\n  \"duration\": 30,\n  \"features\": [\"Daily ROI\"]\n}"},
						"url": {"raw": "{{base_url}}/api/plans", "host": ["{{base_url}}"], "path": ["api","plans"]}
					},
					"response": []
				}
			],
			"description": "Plan endpoints"
		},
		{
			"name": "Wallet",
			"item": [
				{"name": "Get Wallet", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/wallet", "host": ["{{base_url}}"], "path": ["api","wallet"]}}, "response": []},
				{"name": "Get Addresses", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/wallet/addresses", "host": ["{{base_url}}"], "path": ["api","wallet","addresses"]}}, "response": []},
				{"name": "Create Deposit", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"},{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "body": {"mode": "raw", "raw": "{\n  \"amount\": 100,\n  \"currency\": \"USDT\"\n}"}, "url": {"raw": "{{base_url}}/api/wallet/deposit", "host": ["{{base_url}}"], "path": ["api","wallet","deposit"]}}, "response": []},
				{"name": "Request Withdrawal", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"},{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "body": {"mode": "raw", "raw": "{\n  \"amount\": 50,\n  \"currency\": \"USDT\",\n  \"walletAddress\": \"USDT-ADDRESS\"\n}"}, "url": {"raw": "{{base_url}}/api/wallet/withdraw", "host": ["{{base_url}}"], "path": ["api","wallet","withdraw"]}}, "response": []}
			],
			"description": "Wallet endpoints"
		},
		{
			"name": "Transactions",
			"item": [
				{"name": "List Transactions", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/transactions?limit=10", "host": ["{{base_url}}"], "path": ["api","transactions"], "query": [{"key":"limit","value":"10"}]}}, "response": []},
				{"name": "Export CSV", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/transactions/export", "host": ["{{base_url}}"], "path": ["api","transactions","export"]}}, "response": []},
				{"name": "Get Transaction by ID", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/transactions/{{transaction_id}}", "host": ["{{base_url}}"], "path": ["api","transactions","{{transaction_id}}"]}}, "response": []},
				{"name": "Admin - List Withdrawals", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{admin_token}}"}], "url": {"raw": "{{base_url}}/api/transactions/admin/withdrawals?status=pending&page=1&limit=20", "host": ["{{base_url}}"], "path": ["api","transactions","admin","withdrawals"], "query": [{"key":"status","value":"pending"},{"key":"page","value":"1"},{"key":"limit","value":"20"}]}}, "response": []},
				{"name": "Admin - Confirm Withdrawal", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"},{"key": "Authorization", "value": "Bearer {{admin_token}}"}], "body": {"mode": "raw", "raw": "{\n  \"txHash\": \"onchain-or-internal-hash\"\n}"}, "url": {"raw": "{{base_url}}/api/transactions/{{withdrawal_transaction_id}}/confirm", "host": ["{{base_url}}"], "path": ["api","transactions","{{withdrawal_transaction_id}}","confirm"]}}, "response": []},
				{"name": "Admin - Fail Withdrawal", "request": {"method": "POST", "header": [{"key": "Content-Type", "value": "application/json"},{"key": "Authorization", "value": "Bearer {{admin_token}}"}], "body": {"mode": "raw", "raw": "{\n  \"reason\": \"Insufficient reserves\"\n}"}, "url": {"raw": "{{base_url}}/api/transactions/{{withdrawal_transaction_id}}/fail", "host": ["{{base_url}}"], "path": ["api","transactions","{{withdrawal_transaction_id}}","fail"]}}, "response": []}
			],
			"description": "Transaction endpoints"
		},
		{
			"name": "Referrals",
			"item": [
				{"name": "Referral Info", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/referrals", "host": ["{{base_url}}"], "path": ["api","referrals"]}}, "response": []},
				{"name": "Referral List", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/referrals/list", "host": ["{{base_url}}"], "path": ["api","referrals","list"]}}, "response": []},
				{"name": "Referral Earnings", "request": {"method": "GET", "header": [{"key": "Authorization", "value": "Bearer {{auth_token}}"}], "url": {"raw": "{{base_url}}/api/referrals/earnings", "host": ["{{base_url}}"], "path": ["api","referrals","earnings"]}}, "response": []}
			],
			"description": "Referral endpoints"
		},
		{
			"name": "Earnings",
			"item": [
				{
					"name": "Get Earnings Summary",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings/summary",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings",
								"summary"
							]
						},
						"description": "Get earnings summary including total earnings, withdrawn amount, available amount, investment earnings, referral bonuses, and withdrawable amount. Shows aggregate statistics for all earnings."
					},
					"response": []
				},
				{
					"name": "List Earnings - All",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings?type=all&page=1&pageSize=20&sortBy=date&sortOrder=desc",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings"
							],
							"query": [
								{
									"key": "type",
									"value": "all",
									"description": "Filter by type: 'investment_earning', 'referral_bonus', or 'all'"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "pageSize",
									"value": "20"
								},
								{
									"key": "sortBy",
									"value": "date",
									"description": "Sort by: 'date', 'amount', or 'withdrawableDate'"
								},
								{
									"key": "sortOrder",
									"value": "desc",
									"description": "Sort order: 'asc' or 'desc'"
								}
							]
						},
						"description": "List all earnings (investment earnings and referral bonuses) with pagination and filtering. Query params: type (investment_earning|referral_bonus|all), isWithdrawn (true|false), page, pageSize, sortBy (date|amount|withdrawableDate), sortOrder (asc|desc)."
					},
					"response": []
				},
				{
					"name": "List Earnings - Investment Only",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings?type=investment_earning&page=1&pageSize=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings"
							],
							"query": [
								{
									"key": "type",
									"value": "investment_earning"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "pageSize",
									"value": "20"
								}
							]
						},
						"description": "List only investment earnings (excludes referral bonuses)."
					},
					"response": []
				},
				{
					"name": "List Earnings - Referral Bonuses Only",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings?type=referral_bonus&page=1&pageSize=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings"
							],
							"query": [
								{
									"key": "type",
									"value": "referral_bonus"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "pageSize",
									"value": "20"
								}
							]
						},
						"description": "List only referral bonus earnings. Shows bonuses earned from referring users. Referral bonus percentages: GOLD and below (Bronze, Silver, Gold) = 3%, DIAMOND and above (Platinum, Diamond) = 5%."
					},
					"response": []
				},
				{
					"name": "List Earnings - Withdrawn Only",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings?isWithdrawn=true&page=1&pageSize=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings"
							],
							"query": [
								{
									"key": "isWithdrawn",
									"value": "true"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "pageSize",
									"value": "20"
								}
							]
						},
						"description": "List only withdrawn earnings (earnings that have been processed by admin)."
					},
					"response": []
				},
				{
					"name": "List Earnings - Available for Withdrawal",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings?isWithdrawn=false&page=1&pageSize=20&sortBy=withdrawableDate&sortOrder=asc",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings"
							],
							"query": [
								{
									"key": "isWithdrawn",
									"value": "false"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "pageSize",
									"value": "20"
								},
								{
									"key": "sortBy",
									"value": "withdrawableDate"
								},
								{
									"key": "sortOrder",
									"value": "asc"
								}
							]
						},
						"description": "List earnings available for withdrawal (not withdrawn yet). Note: Earnings can only be withdrawn after complete 30 days from the earning date."
					},
					"response": []
				},
				{
					"name": "Withdraw Earnings",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.data) {",
									"        pm.environment.set('withdrawal_reference', response.data.reference);",
									"        pm.environment.set('withdrawal_transaction_id', response.data.transactionId);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"amount\": 100,\n  \"currency\": \"USDT\",\n  \"walletAddress\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/earnings/withdraw",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings",
								"withdraw"
							]
						},
						"description": "Request withdrawal of available earnings. Earnings can only be withdrawn after complete 30 days from the earning date. The withdrawal request will be created with 'pending' status and will be processed manually by admin. Earnings are reserved (linked to transaction) but not marked as withdrawn until admin processes the request. Wallet balance is not deducted until admin processes the withdrawal."
					},
					"response": []
				},
				{
					"name": "Get Today's Income",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings/today",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings",
								"today"
							]
						}
					},
					"response": [],
					"description": "Returns today's income split by category: investment_earning, referral_bonus, and total. Uses UTC day boundaries."
				},
				{
					"name": "Get Daily Breakdown",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/earnings/daily?start=2025-11-01&end=2025-11-12",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"earnings",
								"daily"
							],
							"query": [
								{
									"key": "start",
									"value": "2025-11-01",
									"description": "Optional YYYY-MM-DD (UTC)"
								},
								{
									"key": "end",
									"value": "2025-11-12",
									"description": "Optional YYYY-MM-DD (UTC)"
								}
							]
						}
					},
					"response": [],
					"description": "Returns per-day totals between start and end (inclusive), split by investment and referral with a total field. Dates are UTC; if omitted, defaults to today."
				}
			],
			"description": "Earnings management endpoints - View all earnings (investment earnings and referral bonuses) and request withdrawals. Referral bonuses: GOLD and below (Bronze, Silver, Gold) = 3%, DIAMOND and above (Platinum, Diamond) = 5%. Earnings can only be withdrawn after complete 30 days from the earning date. Withdrawals are processed manually by admin."
		},
		{
			"name": "Webhooks",
			"item": [
				{
					"name": "Payment Confirmation - Success",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reference\": \"{{payment_reference}}\",\n  \"txHash\": \"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef\",\n  \"confirmations\": 6,\n  \"status\": \"confirmed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/webhooks/payment",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"webhooks",
								"payment"
							]
						},
						"description": "Simulate a successful payment confirmation webhook. Use the reference from investment creation."
					},
					"response": []
				},
				{
					"name": "Payment Confirmation - Failed",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"reference\": \"{{payment_reference}}\",\n  \"txHash\": \"0xfailed1234567890abcdef1234567890abcdef1234567890abcdef1234567890\",\n  \"confirmations\": 0,\n  \"status\": \"failed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/webhooks/payment",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"webhooks",
								"payment"
							]
						},
						"description": "Simulate a failed payment webhook."
					},
					"response": []
				}
			],
			"description": "Webhook endpoints for payment processing"
		},
		{
			"name": "Wallet",
			"item": [
				{
					"name": "Manual Deposit - User Wallet",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.walletBalance !== undefined) {",
									"        pm.environment.set('wallet_balance', response.walletBalance);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"amount\": 1000,\n  \"currency\": \"USDT\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/wallet/deposit",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"wallet",
								"deposit"
							]
						},
						"description": "Manually deposit funds into your wallet (for testing). Users deposit into their own wallet. Admins can specify userId to deposit into any wallet."
					},
					"response": []
				},
				{
					"name": "Manual Deposit - Admin to User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.walletBalance !== undefined) {",
									"        pm.environment.set('wallet_balance', response.walletBalance);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": \"USER_ID_HERE\",\n  \"amount\": 5000,\n  \"currency\": \"USDT\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/wallet/deposit",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"wallet",
								"deposit"
							]
						},
						"description": "Admin endpoint to deposit funds into any user's wallet. Replace USER_ID_HERE with actual user ID."
					},
					"response": []
				},
				{
					"name": "Get Wallet Balance",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.walletBalance !== undefined) {",
									"        pm.environment.set('wallet_balance', response.walletBalance);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/wallet/balance",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"wallet",
								"balance"
							]
						},
						"description": "Get your wallet balance. Users can only check their own balance. Admins can add ?userId=USER_ID to check any user's balance."
					},
					"response": []
				}
			],
			"description": "Wallet management endpoints - Deposit funds and check balance. For testing purposes, manual deposits are immediately confirmed."
		},
		{
			"name": "Health Check",
			"item": [
				{
					"name": "Root Endpoint",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						},
						"description": "Check if the API is running."
					},
					"response": []
				}
			],
			"description": "API health check endpoints"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:5500",
			"type": "string"
		}
	]
}
